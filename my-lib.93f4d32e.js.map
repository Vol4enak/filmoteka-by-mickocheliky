{"mappings":"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","sources":["src/my-lib.js","src/js/lib-js/render-lib.js"],"sourcesContent":["import './js/body-logic/modal-win/modal';\nimport './js/body-logic/modal-win/modal-btn';\nimport './js/lib-js/render-lib';\n","import {\n  arrIdCardForWatched,\n  arrIdCardForQueue,\n} from '../body-logic/modal-win/modal-btn';\nimport { getFetchedById } from '../../fetch_api';\n\nconst bodyEl = document.querySelector('.film-list');\nconst btnLibWatched = document.querySelector('.header-list--lib__btn-watched');\nconst btnLibQueue = document.querySelector('.header-list--lib__btn-queue');\nconst clearModal = document.querySelector('.clearing-modal');\nconst body = document.querySelector('body');\nconst modalBtn = document.querySelector('.btn-close');\nconst modal = document.querySelector('.modal');\n\nbtnLibWatched.addEventListener('click', LibCardrenderWatch);\nbtnLibQueue.addEventListener('click', LibCardrenderQueue);\nbodyEl.addEventListener('click', openModal);\n\nexport function openModal(e) {\n  const query = e.target.nodeName;\n  if (query === 'IMG' || query === 'P' || query === 'UL') {\n    modal.addEventListener('click', onBtnClick);\n    modalBtn.addEventListener('click', onClose);\n  }\n}\nLibCardrenderWatch();\nconsole.log(123);\nlet a = 0;\nlet b = 0;\nfunction onBtnClick(e) {\n  const query = e.target.nodeName;\n  const queryClass = e.target.className;\n  const dataId = e.target.dataset.action;\n\n  if (query === 'BUTTON' && dataId === 'watched') {\n    a += 1;\n  }\n  if (query === 'BUTTON' && dataId === 'queue') {\n    b += 1;\n  }\n\n  if (queryClass === 'overlay') {\n    onClose();\n    if (a % 2 === 1) {\n      LibCardrenderWatch();\n    }\n    if (b % 2 === 1) {\n      LibCardrenderQueue();\n    }\n    a = 0;\n    b = 0;\n  }\n}\n\nfunction onClose() {\n  clearModal.innerHTML = '';\n  modal.classList.add('visibility');\n  body.style.overflow = 'visible';\n  modal.removeEventListener('click', onBtnClick);\n}\n\nasync function LibCardrenderWatch() {\n  stylesForWatched();\n  bodyEl.innerHTML = '';\n  arrIdCardForWatched.map(id => {\n    getFetchedById(id).then(res => {\n      let { poster_path, original_title, id, release_date } = res;\n      let imgPreview = 'https://image.tmdb.org/t/p/w500';\n      if (!poster_path) {\n        poster_path = '/wp-content/uploads/2022/05/coming-soon.jpg';\n        imgPreview = 'https://en9lish.com';\n      }\n      if (!release_date) {\n        release_date = 'N/A';\n      }\n\n      let genres = res.genres.map(res => res.name);\n      if (genres.length === 0) {\n        genres.push('N/A');\n      }\n\n      if (genres.length > 3) {\n        genres = genres.slice(0, 2) + ', other';\n      }\n      genres = genres.toString().replaceAll(',', ', ');\n      const render = `<article class=\"box\" \">\n            <img class=\"movie-preview\"src=\"${imgPreview}${poster_path}\" alt=\"123\" width=\"336\" height=\"455\" data-action=\"${id}\" >\n            <ul class=\"info-list\"data-action=\"${id}\">\n              <li>\n              <p class=\"info-list__title\"data-action=\"${id}\">${original_title}</p>\n              </li>\n              <li>\n            <p class=\"info-list__genres\"data-action=\"${id}\">${genres} | ${release_date.slice(\n        0,\n        4\n      )}</p></li>\n          </ul>\n                      </article>`;\n\n      return bodyEl.insertAdjacentHTML('beforeend', render);\n    });\n  });\n}\n\nasync function LibCardrenderQueue() {\n  stylesForQueue();\n  bodyEl.innerHTML = '';\n  arrIdCardForQueue.map(id => {\n    getFetchedById(id).then(res => {\n      let { poster_path, original_title, id, release_date } = res;\n      let imgPreview = 'https://image.tmdb.org/t/p/w500';\n      if (!poster_path) {\n        poster_path = '/wp-content/uploads/2022/05/coming-soon.jpg';\n        imgPreview = 'https://en9lish.com';\n      }\n      if (!release_date) {\n        release_date = 'N/A';\n      }\n\n      let genres = res.genres.map(res => res.name);\n      if (genres.length === 0) {\n        genres.push('N/A');\n      }\n\n      if (genres.length > 3) {\n        genres = genres.slice(0, 2) + ', other';\n      }\n      genres = genres.toString().replaceAll(',', ', ');\n      const render = `<article class=\"box\" \">\n            <img class=\"movie-preview\"src=\"${imgPreview}${poster_path}\" alt=\"123\" width=\"336\" height=\"455\" data-action=\"${id}\" >\n            <ul class=\"info-list\"data-action=\"${id}\">\n              <li>\n              <p class=\"info-list__title\"data-action=\"${id}\">${original_title}</p>\n              </li>\n              <li>\n            <p class=\"info-list__genres\"data-action=\"${id}\">${genres} | ${release_date.slice(\n        0,\n        4\n      )}</p></li>\n          </ul>\n                      </article>`;\n\n      return bodyEl.insertAdjacentHTML('beforeend', render);\n    });\n  });\n}\n\nfunction stylesForWatched() {\n  btnLibQueue.style.backgroundColor = 'transparent';\n  btnLibQueue.style.border = '1px solid white';\n  btnLibWatched.style.backgroundColor = 'rgba(255, 107, 8, 1)';\n  btnLibWatched.style.border = '1px solid rgba(255, 107, 8, 1)';\n}\n\nfunction stylesForQueue() {\n  btnLibWatched.style.backgroundColor = 'transparent';\n  btnLibWatched.style.border = '1px solid white';\n  btnLibQueue.style.backgroundColor = 'rgba(255, 107, 8, 1)';\n  btnLibQueue.style.border = '1px solid rgba(255, 107, 8, 1)';\n}\n"],"names":["parcelRequire","$cLZ64","$2ffb79f444b3dfca$var$bodyEl","document","querySelector","$2ffb79f444b3dfca$var$btnLibWatched","$2ffb79f444b3dfca$var$btnLibQueue","$2ffb79f444b3dfca$var$clearModal","$2ffb79f444b3dfca$var$body","$2ffb79f444b3dfca$var$modalBtn","$2ffb79f444b3dfca$var$modal","addEventListener","$2ffb79f444b3dfca$var$LibCardrenderWatch","$2ffb79f444b3dfca$var$LibCardrenderQueue","e","query","target","nodeName","$2ffb79f444b3dfca$var$onBtnClick","$2ffb79f444b3dfca$var$onClose","console","log","$2ffb79f444b3dfca$var$a","$2ffb79f444b3dfca$var$b","queryClass","className","dataId","dataset","action","innerHTML","classList","add","style","overflow","removeEventListener","async","backgroundColor","border","arrIdCardForWatched","map","id1","$gvHvN","getFetchedById","then","res1","poster_path","original_title","id","release_date","imgPreview","genres","res","name","length","push","slice","toString","replaceAll","render","insertAdjacentHTML","arrIdCardForQueue","id2","res2"],"version":3,"file":"my-lib.93f4d32e.js.map"}