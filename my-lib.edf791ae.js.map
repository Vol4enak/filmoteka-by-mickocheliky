{"mappings":"iiBAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,uCAMME,EAASC,SAASC,cAAc,cAChCC,EAAgBF,SAASC,cAAc,kCACvCE,EAAcH,SAASC,cAAc,gCACrCG,EAAaJ,SAASC,cAAc,mBACpCI,EAAOL,SAASC,cAAc,QAC9BK,EAAWN,SAASC,cAAc,cAClCM,EAAQP,SAASC,cAAc,UAErCC,EAAcM,iBAAiB,QAASC,GACxCN,EAAYK,iBAAiB,QAASE,GACtCX,EAAOS,iBAAiB,SAEjB,SAAmBG,GACxB,IAAMC,EAAQD,EAAEE,OAAOC,SACT,QAAVF,GAA6B,MAAVA,GAA2B,OAAVA,IACtCL,EAAMC,iBAAiB,QAASO,GAChCT,EAASE,iBAAiB,QAASQ,G,IAGvCP,IACAQ,QAAQC,IAAI,KACZ,IAAIC,EAAI,EACJC,EAAI,EACR,SAASL,EAAWJ,GAClB,IAAMC,EAAQD,EAAEE,OAAOC,SACjBO,EAAaV,EAAEE,OAAOS,UACtBC,EAASZ,EAAEE,OAAOW,QAAQC,OAElB,WAAVb,GAAiC,YAAXW,IACxBJ,GAAK,GAEO,WAAVP,GAAiC,UAAXW,IACxBH,GAAK,GAGY,YAAfC,IACFL,IACIG,EAAI,GAAM,GACZV,IAEEW,EAAI,GAAM,GACZV,IAEFS,EAAI,EACJC,EAAI,E,CAIR,SAASJ,IACPZ,EAAWsB,UAAY,GACvBnB,EAAMoB,UAAUC,IAAI,cACpBvB,EAAKwB,MAAMC,SAAW,UACtBvB,EAAMwB,oBAAoB,QAAShB,E,UAGtBN,I,OAAAuB,EAAkBC,MAAAC,KAAAC,U,UAAlBH,I,OAAAA,EAAfI,EAAAtC,EAAA,CAAAsC,EAAAC,GAAAC,MAAA,SAAAC,I,kEACEC,IACAzC,EAAO2B,UAAY,GACnBe,EAAAC,oBAAoBC,KAAI,SAAAC,IACtB,EAAAC,EAAAC,gBAAeF,GAAIG,MAAK,SAAAC,GACtB,IAAMC,EAAkDD,EAAlDC,YAAaC,EAAqCF,EAArCE,eAAgBC,EAAqBH,EAArBJ,GAAIQ,EAAiBJ,EAAjBI,aACnCC,EAAa,kCACZJ,IACHA,EAAc,8CACdI,EAAa,uBAEVD,IACHA,EAAe,OAGjB,IAAIE,EAASN,EAAIM,OAAOX,KAAI,SAAAY,G,OAAOA,EAAIC,I,IACjB,IAAlBF,EAAOG,QACTH,EAAOI,KAAK,OAGVJ,EAAOG,OAAS,IAClBH,EAASA,EAAOK,MAAM,EAAG,GAAK,WAEhCL,EAASA,EAAOM,WAAWC,WAAW,IAAK,MAC3C,IAAMC,EAAS,uEACqCC,OAAbV,GAA6EU,OAAhEd,EAAY,sDACtBc,OAD0EZ,EAAG,uDAGrEY,OAFRZ,EAAG,kFAEYY,OAAPZ,EAAG,MAGJY,OAHQb,EAAe,wGAGhBa,OAAPZ,EAAG,MAAgBY,OAAZT,EAAO,OAG7DS,OAHkEX,EAAaO,MAC/E,EACA,GACA,gEAIF,OAAO5D,EAAOiE,mBAAmB,YAAaF,E,mDAtCnB7B,MAAAC,KAAAC,U,UA2ClBzB,I,OAAAuD,EAAkBhC,MAAAC,KAAAC,U,UAAlB8B,I,OAAAA,EAAf7B,EAAAtC,EAAA,CAAAsC,EAAAC,GAAAC,MAAA,SAAAC,I,kEACE2B,IACAnE,EAAO2B,UAAY,GACnBe,EAAA0B,kBAAkBxB,KAAI,SAAAC,IACpB,EAAAC,EAAAC,gBAAeF,GAAIG,MAAK,SAAAqB,GACtB,IAAMnB,EAAkDmB,EAAlDnB,YAAaC,EAAqCkB,EAArClB,eAAgBC,EAAqBiB,EAArBxB,GAAIQ,EAAiBgB,EAAjBhB,aACnCC,EAAa,kCACZJ,IACHA,EAAc,8CACdI,EAAa,uBAEVD,IACHA,EAAe,OAGjB,IAAIE,EAASc,EAAId,OAAOX,KAAI,SAAAY,G,OAAOA,EAAIC,I,IACjB,IAAlBF,EAAOG,QACTH,EAAOI,KAAK,OAGVJ,EAAOG,OAAS,IAClBH,EAASA,EAAOK,MAAM,EAAG,GAAK,WAEhCL,EAASA,EAAOM,WAAWC,WAAW,IAAK,MAC3C,IAAMC,EAAS,uEACqCC,OAAbV,GAA6EU,OAAhEd,EAAY,sDACtBc,OAD0EZ,EAAG,uDAGrEY,OAFRZ,EAAG,kFAEYY,OAAPZ,EAAG,MAGJY,OAHQb,EAAe,wGAGhBa,OAAPZ,EAAG,MAAgBY,OAAZT,EAAO,OAG7DS,OAHkEX,EAAaO,MAC/E,EACA,GACA,gEAIF,OAAO5D,EAAOiE,mBAAmB,YAAaF,E,mDAtCnB7B,MAAAC,KAAAC,U,CA2CjC,SAASK,IACPrC,EAAY0B,MAAMwC,gBAAkB,cACpClE,EAAY0B,MAAMyC,OAAS,kBAC3BpE,EAAc2B,MAAMwC,gBAAkB,uBACtCnE,EAAc2B,MAAMyC,OAAS,gC,CAG/B,SAASJ,IACPhE,EAAc2B,MAAMwC,gBAAkB,cACtCnE,EAAc2B,MAAMyC,OAAS,kBAC7BnE,EAAY0B,MAAMwC,gBAAkB,uBACpClE,EAAY0B,MAAMyC,OAAS,gC","sources":["src/my-lib.js","src/js/lib-js/render-lib.js"],"sourcesContent":["import './js/body-logic/modal-win/modal';\nimport './js/body-logic/modal-win/modal-btn';\nimport './js/lib-js/render-lib';\n","import {\n  arrIdCardForWatched,\n  arrIdCardForQueue,\n} from '../body-logic/modal-win/modal-btn';\nimport { getFetchedById } from '../../fetch_api';\n\nconst bodyEl = document.querySelector('.film-list');\nconst btnLibWatched = document.querySelector('.header-list--lib__btn-watched');\nconst btnLibQueue = document.querySelector('.header-list--lib__btn-queue');\nconst clearModal = document.querySelector('.clearing-modal');\nconst body = document.querySelector('body');\nconst modalBtn = document.querySelector('.btn-close');\nconst modal = document.querySelector('.modal');\n\nbtnLibWatched.addEventListener('click', LibCardrenderWatch);\nbtnLibQueue.addEventListener('click', LibCardrenderQueue);\nbodyEl.addEventListener('click', openModal);\n\nexport function openModal(e) {\n  const query = e.target.nodeName;\n  if (query === 'IMG' || query === 'P' || query === 'UL') {\n    modal.addEventListener('click', onBtnClick);\n    modalBtn.addEventListener('click', onClose);\n  }\n}\nLibCardrenderWatch();\nconsole.log(123);\nlet a = 0;\nlet b = 0;\nfunction onBtnClick(e) {\n  const query = e.target.nodeName;\n  const queryClass = e.target.className;\n  const dataId = e.target.dataset.action;\n\n  if (query === 'BUTTON' && dataId === 'watched') {\n    a += 1;\n  }\n  if (query === 'BUTTON' && dataId === 'queue') {\n    b += 1;\n  }\n\n  if (queryClass === 'overlay') {\n    onClose();\n    if (a % 2 === 1) {\n      LibCardrenderWatch();\n    }\n    if (b % 2 === 1) {\n      LibCardrenderQueue();\n    }\n    a = 0;\n    b = 0;\n  }\n}\n\nfunction onClose() {\n  clearModal.innerHTML = '';\n  modal.classList.add('visibility');\n  body.style.overflow = 'visible';\n  modal.removeEventListener('click', onBtnClick);\n}\n\nasync function LibCardrenderWatch() {\n  stylesForWatched();\n  bodyEl.innerHTML = '';\n  arrIdCardForWatched.map(id => {\n    getFetchedById(id).then(res => {\n      let { poster_path, original_title, id, release_date } = res;\n      let imgPreview = 'https://image.tmdb.org/t/p/w500';\n      if (!poster_path) {\n        poster_path = '/wp-content/uploads/2022/05/coming-soon.jpg';\n        imgPreview = 'https://en9lish.com';\n      }\n      if (!release_date) {\n        release_date = 'N/A';\n      }\n\n      let genres = res.genres.map(res => res.name);\n      if (genres.length === 0) {\n        genres.push('N/A');\n      }\n\n      if (genres.length > 3) {\n        genres = genres.slice(0, 2) + ', other';\n      }\n      genres = genres.toString().replaceAll(',', ', ');\n      const render = `<article class=\"box\" \">\n            <img class=\"movie-preview\"src=\"${imgPreview}${poster_path}\" alt=\"123\" width=\"336\" height=\"455\" data-action=\"${id}\" >\n            <ul class=\"info-list\"data-action=\"${id}\">\n              <li>\n              <p class=\"info-list__title\"data-action=\"${id}\">${original_title}</p>\n              </li>\n              <li>\n            <p class=\"info-list__genres\"data-action=\"${id}\">${genres} | ${release_date.slice(\n        0,\n        4\n      )}</p></li>\n          </ul>\n                      </article>`;\n\n      return bodyEl.insertAdjacentHTML('beforeend', render);\n    });\n  });\n}\n\nasync function LibCardrenderQueue() {\n  stylesForQueue();\n  bodyEl.innerHTML = '';\n  arrIdCardForQueue.map(id => {\n    getFetchedById(id).then(res => {\n      let { poster_path, original_title, id, release_date } = res;\n      let imgPreview = 'https://image.tmdb.org/t/p/w500';\n      if (!poster_path) {\n        poster_path = '/wp-content/uploads/2022/05/coming-soon.jpg';\n        imgPreview = 'https://en9lish.com';\n      }\n      if (!release_date) {\n        release_date = 'N/A';\n      }\n\n      let genres = res.genres.map(res => res.name);\n      if (genres.length === 0) {\n        genres.push('N/A');\n      }\n\n      if (genres.length > 3) {\n        genres = genres.slice(0, 2) + ', other';\n      }\n      genres = genres.toString().replaceAll(',', ', ');\n      const render = `<article class=\"box\" \">\n            <img class=\"movie-preview\"src=\"${imgPreview}${poster_path}\" alt=\"123\" width=\"336\" height=\"455\" data-action=\"${id}\" >\n            <ul class=\"info-list\"data-action=\"${id}\">\n              <li>\n              <p class=\"info-list__title\"data-action=\"${id}\">${original_title}</p>\n              </li>\n              <li>\n            <p class=\"info-list__genres\"data-action=\"${id}\">${genres} | ${release_date.slice(\n        0,\n        4\n      )}</p></li>\n          </ul>\n                      </article>`;\n\n      return bodyEl.insertAdjacentHTML('beforeend', render);\n    });\n  });\n}\n\nfunction stylesForWatched() {\n  btnLibQueue.style.backgroundColor = 'transparent';\n  btnLibQueue.style.border = '1px solid white';\n  btnLibWatched.style.backgroundColor = 'rgba(255, 107, 8, 1)';\n  btnLibWatched.style.border = '1px solid rgba(255, 107, 8, 1)';\n}\n\nfunction stylesForQueue() {\n  btnLibWatched.style.backgroundColor = 'transparent';\n  btnLibWatched.style.border = '1px solid white';\n  btnLibQueue.style.backgroundColor = 'rgba(255, 107, 8, 1)';\n  btnLibQueue.style.border = '1px solid rgba(255, 107, 8, 1)';\n}\n"],"names":["parcelRequire","$bpxeT","$389d49a43cc389e1$var$bodyEl","document","querySelector","$389d49a43cc389e1$var$btnLibWatched","$389d49a43cc389e1$var$btnLibQueue","$389d49a43cc389e1$var$clearModal","$389d49a43cc389e1$var$body","$389d49a43cc389e1$var$modalBtn","$389d49a43cc389e1$var$modal","addEventListener","$389d49a43cc389e1$var$LibCardrenderWatch","$389d49a43cc389e1$var$LibCardrenderQueue","e","query","target","nodeName","$389d49a43cc389e1$var$onBtnClick","$389d49a43cc389e1$var$onClose","console","log","$389d49a43cc389e1$var$a","$389d49a43cc389e1$var$b","queryClass","className","dataId","dataset","action","innerHTML","classList","add","style","overflow","removeEventListener","$389d49a43cc389e1$var$_LibCardrenderWatch","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","$389d49a43cc389e1$var$stylesForWatched","$8pdLi","arrIdCardForWatched","map","id","$iXPk2","getFetchedById","then","res1","poster_path","original_title","_$id","release_date","imgPreview","genres","res","name","length","push","slice","toString","replaceAll","render","concat","insertAdjacentHTML","$389d49a43cc389e1$var$_LibCardrenderQueue","$389d49a43cc389e1$var$stylesForQueue","arrIdCardForQueue","res2","backgroundColor","border"],"version":3,"file":"my-lib.edf791ae.js.map"}